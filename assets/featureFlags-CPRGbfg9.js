class t{flags;STORAGE_KEY="provence-courses-feature-flags";constructor(){this.flags={cleanupOnLogout:!0,cleanupOnLogoutLevel:"full",improvedRouteDetection:!1,userSpecificStorage:!1,enableCleanupLogs:!0,enableCleanupMetrics:!1},this.loadFlags()}loadFlags(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const s=JSON.parse(e);this.flags={...this.flags,...s},console.log("🚩 [FeatureFlags] Flags chargés:",this.flags)}}catch(e){console.warn("⚠️ [FeatureFlags] Erreur chargement flags, utilisation des défauts:",e)}}saveFlags(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.flags)),console.log("💾 [FeatureFlags] Flags sauvegardés")}catch(e){console.error("❌ [FeatureFlags] Erreur sauvegarde flags:",e)}}isEnabled(e){const s=this.flags[e];return this.flags.enableCleanupLogs&&console.log(`🚩 [FeatureFlags] Check ${e}: ${s}`),!!s}getValue(e){return this.flags[e]}setFlag(e,s){const l=this.flags[e];this.flags[e]=s,console.log(`🔧 [FeatureFlags] ${e}: ${l} → ${s}`),this.saveFlags(),console.log(`📊 [FeatureFlags] FLAG CHANGE - ${e} activé: ${s}`)}disableAllExperimental(){console.warn("🆘 [FeatureFlags] DÉSACTIVATION D'URGENCE de tous les flags expérimentaux"),this.flags.cleanupOnLogout=!1,this.flags.improvedRouteDetection=!1,this.flags.userSpecificStorage=!1,this.flags.enableCleanupMetrics=!1,this.saveFlags(),console.log("✅ [FeatureFlags] Tous les flags expérimentaux désactivés")}getAllFlags(){return{...this.flags}}debugFlags(){console.table(this.flags)}shouldCleanupOnLogout(){return this.isEnabled("cleanupOnLogout")}getCleanupLevel(){return this.getValue("cleanupOnLogoutLevel")}enableCleanupForTesting(e="minimal"){console.log(`🧪 [FeatureFlags] Activation nettoyage pour tests - niveau: ${e}`),this.setFlag("cleanupOnLogout",!0),this.setFlag("cleanupOnLogoutLevel",e),this.setFlag("enableCleanupLogs",!0)}disableCleanupForTesting(){console.log("🛑 [FeatureFlags] Désactivation nettoyage"),this.setFlag("cleanupOnLogout",!1)}}const a=new t,g=()=>a.shouldCleanupOnLogout(),n=()=>a.getCleanupLevel();export{a as featureFlags,n as getCleanupLevel,g as shouldCleanupOnLogout};
